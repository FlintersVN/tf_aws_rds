# tf_aws_rds

## Requirements

| Name                                                                     | Version |
| ------------------------------------------------------------------------ | ------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 0.12 |

## Providers

| Name                                             | Version |
| ------------------------------------------------ | ------- |
| <a name="provider_aws"></a> [aws](#provider_aws) | n/a     |

## Modules

No modules.

## Resources

| Name                                                                                                                             | Type     |
| -------------------------------------------------------------------------------------------------------------------------------- | -------- |
| [aws_db_instance.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_instance)               | resource |
| [aws_db_option_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_option_group)       | resource |
| [aws_db_parameter_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_parameter_group) | resource |
| [aws_db_subnet_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_subnet_group)       | resource |
| [aws_route53_record.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record)         | resource |
| [aws_security_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)         | resource |

## Inputs

| Name                                                                                                                                             | Description                                                                                                                                                                                                                                                                                         | Type                                                                                                                                                                                                                                                                                     | Default                                | Required |
| ------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------- | :------: |
| <a name="input_allocated_storage"></a> [allocated_storage](#input_allocated_storage)                                                             | The allocated storage in gibibytes                                                                                                                                                                                                                                                                  | `number`                                                                                                                                                                                                                                                                                 | `10`                                   |    no    |
| <a name="input_allow_major_version_upgrade"></a> [allow_major_version_upgrade](#input_allow_major_version_upgrade)                               | Allow major version upgrade                                                                                                                                                                                                                                                                         | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_allowed_ips"></a> [allowed_ips](#input_allowed_ips)                                                                               | List of ip addresses to connect database instances                                                                                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                 | `"127.0.0.1"`                          |    no    |
| <a name="input_apply_immediately"></a> [apply_immediately](#input_apply_immediately)                                                             | Specifies whether any database modifications are applied immediately, or during the next maintenance window.                                                                                                                                                                                        | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_auto_minor_version_upgrade"></a> [auto_minor_version_upgrade](#input_auto_minor_version_upgrade)                                  | Allow automated minor version upgrade (e.g. from Postgres 9.5.3 to Postgres 9.5.4)                                                                                                                                                                                                                  | `bool`                                                                                                                                                                                                                                                                                   | `true`                                 |    no    |
| <a name="input_availability_zone"></a> [availability_zone](#input_availability_zone)                                                             | The AZ for the RDS instance                                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                 | `null`                                 |    no    |
| <a name="input_backup_retention_period"></a> [backup_retention_period](#input_backup_retention_period)                                           | The days to retain backups for. Must be between 0 and 35                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                 | `"7"`                                  |    no    |
| <a name="input_backup_window"></a> [backup_window](#input_backup_window)                                                                         | When AWS can perform DB snapshots, can't overlap with maintenance window                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                 | `"22:00-03:00"`                        |    no    |
| <a name="input_ca_cert_identifier"></a> [ca_cert_identifier](#input_ca_cert_identifier)                                                          | The identifier of the CA certificate for the DB instance                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                 | `"rds-ca-2019"`                        |    no    |
| <a name="input_copy_tags_to_snapshot"></a> [copy_tags_to_snapshot](#input_copy_tags_to_snapshot)                                                 | Copy tags from DB to a snapshot                                                                                                                                                                                                                                                                     | `bool`                                                                                                                                                                                                                                                                                   | `true`                                 |    no    |
| <a name="input_db_name"></a> [db_name](#input_db_name)                                                                                           | The name of the database to create when the DB instance is created                                                                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_db_options"></a> [db_options](#input_db_options)                                                                                  | A list of DB options to apply with an option group. Depends on DB engine                                                                                                                                                                                                                            | <pre>list(object({<br> db_security_group_memberships = list(string)<br> option_name = string<br> port = number<br> version = string<br> vpc_security_group_memberships = list(string)<br><br> option_settings = list(object({<br> name = string<br> value = string<br> }))<br> }))</pre> | `[]`                                   |    no    |
| <a name="input_db_parameter"></a> [db_parameter](#input_db_parameter)                                                                            | A list of DB parameters to apply. Note that parameters may differ from a DB family to another                                                                                                                                                                                                       | <pre>list(object({<br> apply_method = string<br> name = string<br> value = string<br> }))</pre>                                                                                                                                                                                          | `[]`                                   |    no    |
| <a name="input_db_parameter_group"></a> [db_parameter_group](#input_db_parameter_group)                                                          | The DB parameter group family name. The value depends on DB engine used. See [DBParameterGroupFamily](https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_CreateDBParameterGroup.html#API_CreateDBParameterGroup_RequestParameters) for instructions on how to retrieve applicable value. | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_deletion_protection"></a> [deletion_protection](#input_deletion_protection)                                                       | Set to true to enable deletion protection on the RDS instance                                                                                                                                                                                                                                       | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_enabled_cloudwatch_logs_exports"></a> [enabled_cloudwatch_logs_exports](#input_enabled_cloudwatch_logs_exports)                   | List of log types to enable for exporting to CloudWatch logs. If omitted, no logs will be exported. Valid values (depending on engine): alert, audit, error, general, listener, slowquery, trace, postgresql (PostgreSQL), upgrade (PostgreSQL).                                                    | `list(string)`                                                                                                                                                                                                                                                                           | `[]`                                   |    no    |
| <a name="input_engine"></a> [engine](#input_engine)                                                                                              | Database engine type                                                                                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_engine_version"></a> [engine_version](#input_engine_version)                                                                      | The database engine version.                                                                                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_iam_database_authentication_enabled"></a> [iam_database_authentication_enabled](#input_iam_database_authentication_enabled)       | Specifies whether or mappings of AWS Identity and Access Management (IAM) accounts to database accounts is enabled                                                                                                                                                                                  | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_identifier"></a> [identifier](#input_identifier)                                                                                  | The name of the RDS instance, if omitted, Terraform will assign a random, unique identifier.                                                                                                                                                                                                        | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_instance_class"></a> [instance_class](#input_instance_class)                                                                      | The RDS instance class.                                                                                                                                                                                                                                                                             | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_iops"></a> [iops](#input_iops)                                                                                                    | The amount of provisioned IOPS. Setting this implies a storage_type of 'io1'. Default is 0 if rds storage type is not 'io1'                                                                                                                                                                         | `number`                                                                                                                                                                                                                                                                                 | `0`                                    |    no    |
| <a name="input_license_model"></a> [license_model](#input_license_model)                                                                         | License model for this DB. Optional, but required for some DB Engines. Valid values: license-included \| bring-your-own-license \| general-public-license                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                 | `""`                                   |    no    |
| <a name="input_maintenance_window"></a> [maintenance_window](#input_maintenance_window)                                                          | The window to perform maintenance in. Syntax: 'ddd:hh24:mi-ddd:hh24:mi' UTC                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                 | `"Mon:03:00-Mon:04:00"`                |    no    |
| <a name="input_major_engine_version"></a> [major_engine_version](#input_major_engine_version)                                                    | Database MAJOR engine version, depends on engine type                                                                                                                                                                                                                                               | `string`                                                                                                                                                                                                                                                                                 | `""`                                   |    no    |
| <a name="input_max_allocated_storage"></a> [max_allocated_storage](#input_max_allocated_storage)                                                 | The upper limit to which RDS can automatically scale the storage in GBs                                                                                                                                                                                                                             | `number`                                                                                                                                                                                                                                                                                 | `0`                                    |    no    |
| <a name="input_monitoring_interval"></a> [monitoring_interval](#input_monitoring_interval)                                                       | The interval, in seconds, between points when Enhanced Monitoring metrics are collected for the DB instance. To disable collecting Enhanced Monitoring metrics, specify 0. Valid Values are 0, 1, 5, 10, 15, 30, 60.                                                                                | `string`                                                                                                                                                                                                                                                                                 | `"0"`                                  |    no    |
| <a name="input_monitoring_role_arn"></a> [monitoring_role_arn](#input_monitoring_role_arn)                                                       | The ARN for the IAM role that permits RDS to send enhanced monitoring metrics to CloudWatch Logs                                                                                                                                                                                                    | `string`                                                                                                                                                                                                                                                                                 | `null`                                 |    no    |
| <a name="input_multi_az"></a> [multi_az](#input_multi_az)                                                                                        | Set to true if multi AZ deployment must be supported                                                                                                                                                                                                                                                | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_option_group_name"></a> [option_group_name](#input_option_group_name)                                                             | Name of the DB option group to associate                                                                                                                                                                                                                                                            | `string`                                                                                                                                                                                                                                                                                 | `""`                                   |    no    |
| <a name="input_parameter_group_name"></a> [parameter_group_name](#input_parameter_group_name)                                                    | Name of the DB parameter group to associate                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                 | `""`                                   |    no    |
| <a name="input_password"></a> [password](#input_password)                                                                                        | password, provide through your ENV variables                                                                                                                                                                                                                                                        | `any`                                                                                                                                                                                                                                                                                    | n/a                                    |   yes    |
| <a name="input_performance_insights_enabled"></a> [performance_insights_enabled](#input_performance_insights_enabled)                            | Specifies whether Performance Insights are enabled.                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_performance_insights_kms_key_id"></a> [performance_insights_kms_key_id](#input_performance_insights_kms_key_id)                   | The ARN for the KMS key to encrypt Performance Insights data. Once KMS key is set, it can never be changed.                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                 | `null`                                 |    no    |
| <a name="input_performance_insights_retention_period"></a> [performance_insights_retention_period](#input_performance_insights_retention_period) | The amount of time in days to retain Performance Insights data. Either 7 (7 days) or 731 (2 years).                                                                                                                                                                                                 | `number`                                                                                                                                                                                                                                                                                 | `7`                                    |    no    |
| <a name="input_port"></a> [port](#input_port)                                                                                                    | Database port                                                                                                                                                                                                                                                                                       | `number`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_publicly_accessible"></a> [publicly_accessible](#input_publicly_accessible)                                                       | Bool to control if instance is publicly accessible.                                                                                                                                                                                                                                                 | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_skip_final_snapshot"></a> [skip_final_snapshot](#input_skip_final_snapshot)                                                       | If true (default), no snapshot will be made before deleting DB                                                                                                                                                                                                                                      | `bool`                                                                                                                                                                                                                                                                                   | `false`                                |    no    |
| <a name="input_snapshot_identifier"></a> [snapshot_identifier](#input_snapshot_identifier)                                                       | Specifies whether or not to create this database from a snapshot. This correlates to the snapshot ID you'd find in the RDS console, e.g: rds:production-2015-06-26-06-05.                                                                                                                           | `string`                                                                                                                                                                                                                                                                                 | `null`                                 |    no    |
| <a name="input_storage_encrypted"></a> [storage_encrypted](#input_storage_encrypted)                                                             | (Optional) Specifies whether the DB instance is encrypted. The default is false if not specified                                                                                                                                                                                                    | `bool`                                                                                                                                                                                                                                                                                   | `true`                                 |    no    |
| <a name="input_storage_type"></a> [storage_type](#input_storage_type)                                                                            | One of standard (magnetic), gp2 (general purpose SSD), or io1 (provisioned IOPS SSD)                                                                                                                                                                                                                | `string`                                                                                                                                                                                                                                                                                 | `"gp2"`                                |    no    |
| <a name="input_subnet_ids"></a> [subnet_ids](#input_subnet_ids)                                                                                  | VPC Subnet IDs the database instance is launched in                                                                                                                                                                                                                                                 | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                                    | n/a                                                                                                                                                                                                                                                                                                 | `map(string)`                                                                                                                                                                                                                                                                            | <pre>{<br> "mackerel": "No"<br>}</pre> |    no    |
| <a name="input_ttl"></a> [ttl](#input_ttl)                                                                                                       | The TTL of the record                                                                                                                                                                                                                                                                               | `number`                                                                                                                                                                                                                                                                                 | `30`                                   |    no    |
| <a name="input_type"></a> [type](#input_type)                                                                                                    | The record type                                                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                 | `"CNAME"`                              |    no    |
| <a name="input_username"></a> [username](#input_username)                                                                                        | (Required unless a `snapshot_identifier` or `replicate_source_db` is provided) Username for the master DB user                                                                                                                                                                                      | `string`                                                                                                                                                                                                                                                                                 | `""`                                   |    no    |
| <a name="input_vpc_id"></a> [vpc_id](#input_vpc_id)                                                                                              | VPC ID the DB instance will be created in                                                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                 | n/a                                    |   yes    |
| <a name="input_vpc_security_group_ids"></a> [vpc_security_group_ids](#input_vpc_security_group_ids)                                              | The IDs of the existing security groups to associate with the DB instance                                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                 | `""`                                   |    no    |

## Outputs

| Name                                                                                      | Description                           |
| ----------------------------------------------------------------------------------------- | ------------------------------------- |
| <a name="output_hostname"></a> [hostname](#output_hostname)                               | DNS host name of the instance         |
| <a name="output_instance_address"></a> [instance_address](#output_instance_address)       | Address of the instance               |
| <a name="output_instance_arn"></a> [instance_arn](#output_instance_arn)                   | ARN of the instance                   |
| <a name="output_instance_endpoint"></a> [instance_endpoint](#output_instance_endpoint)    | DNS Endpoint of the instance          |
| <a name="output_instance_id"></a> [instance_id](#output_instance_id)                      | ID of the instance                    |
| <a name="output_option_group_id"></a> [option_group_id](#output_option_group_id)          | ID of the Option Group                |
| <a name="output_parameter_group_id"></a> [parameter_group_id](#output_parameter_group_id) | ID of the Parameter Group             |
| <a name="output_resource_id"></a> [resource_id](#output_resource_id)                      | The RDS Resource ID of this instance. |
| <a name="output_security_group_id"></a> [security_group_id](#output_security_group_id)    | ID of the Security Group              |
| <a name="output_subnet_group_id"></a> [subnet_group_id](#output_subnet_group_id)          | ID of the created Subnet Group        |
